{% extends 'base.html' %} 

{% block head %}
{% endblock %}

{% block body %}
<link href="https://unpkg.com/gridjs/dist/theme/mermaid.min.css" rel="stylesheet" />

<div class="container-fluid">
    <a href="{{ url_for('create_project') }}" class="btn btn-outline-success m-2">New Project</a>
    <div id="table"></div>
</div>

<script src="https://unpkg.com/gridjs/dist/gridjs.umd.js"></script>
    <script>
      new gridjs.Grid({
        columns: [
          { id: 'id', name: 'ID' },
          { id: 'title', name: 'Project Title' },
          { id: 'budget', name: 'Budget'},
          { id: 'initial_mode', name: 'Mode of Procurement'},
          { id: 'date_needed', name: 'Date Needed' },
          { id: 'source', name: 'Source of Fund' },
          { id: 'category', name: 'Category' },
          { id: 'date_created', name: 'Date Created' },
          { id: 'status', name: 'Date Status' },
        ],
        data: [
          {% for project in projects %}
            {
              id: '{{ project.id }}',
              title: '{{ project.title }}',
              budget: '{{ project.budget }}',
              initial_mode: '{{ project.initial_mode }}',
              date_needed: '{{ project.date_needed.date() }}',
              source: '{{ project.source }}',
              category: '{{ project.category }}',
              date_created: '{{ project.date_created.date() }}',
              status: '{{ project.status }}'
            },
          {% endfor %}
        ],
        search: true,
        sort: true,
        pagination: true,
      }).render(document.getElementById('table'));
    </script>

{% endblock %}